#summary Developer Information for G02.ME
#labels Featured

== Introduction ==

G02.ME functionality is available to programmers through a JSON/Javascript API.  Most of the URL's that are supported by the user-interface have a JSON-equivalent request.

All requests are of the form:

{{{
http://g02.me/...?callback=MyCallback
}}}

to which the response will look like:

{{{
MyCallback({status:"OK", ...});
}}}

Static requests can be inserted in a web page via:

{{{
<script>
function MyCallback(obj)
{
    ... your code here ...
}
</script>
<script src="http://g02.me/...?callback=MyCallback"></script>
}}}

== Concepts ==

G02.ME stored shorted URL's and collects analytics information about user interactions with those shortened URL's.  Each shortened URL is assigned an _id_ (which is encoded as a base-64 number using the digits, letters and the characters "-" and "_").

=== UR Info Format ===

Each URL has the following information that can be retrieved about it:

  * url: The _long_ URL
  * id: The base-64 identifier for the shortened URL
  * title: The page title
  * created: Date url was first shortened
  * viewed: Total number of times the G02.ME URL has been accesssed/viewed
  * shared: Total number of times users have shared this URL (mapped the full URL to it's shortcut).
  * scores: A collection of time-weighted scores based on the total activity surrounding the URL.
  * comments: A collection of user comments about the shared URL.

=== Comments ===

Comments are entered in the API (and user interface) as a formatted string:

  username: comment string [tag1, tag2]

The API returns an array of comment objects with the parts extracted into distinct properties:

  * comment: The text portion of the comment string
  * user: The user name associated with the comment (or id number if anonymous)
  * tags: A comma separated list of tags
  * created: Date comment was created
  * cid: Globally unique id for the comment

=== Scores ===

Each URL has a collection of _scores_ associated with it, that represent a time-weighted sum of the total user activity surrounding each URL.  Scores are average hourly rates over the given time period that represent the sum of scores for various user actions:

  * Share a URL: 3 points
  * Comment on a URL: 2 points
  * View a URL: 1 point

For example, a URL that was shared onced and viewed once would have immediately have the following scores:

{{{
{day: 0.1138,
 week: 0.0164,
 month: 0.0037,
 year: 0.0026
}
}}}

Over time, without additional activity, the scores will be reduced by a factor or 2 (two) over each time period (the _half life_).

== Status Codes ==

The value of the 'status' property of the returned JSON object can be one of:

|| *Code* || *Description* ||
|| OK || Command completed successfully ||
|| Fail || Generic failure ||
|| Fail/!NotFound || Object was not found/does not exist ||
|| Fail/Domain || Attempt to create a shortened URL for a forbidden domain ||

== Methods ==

|| *URL* || *Description* || *Returns* ||
|| / || Retrieve the set of (100) most popular urls || {popular:[url_info, ...]} ||
|| /info/id || Retrieve information about a shortened URL id. || url_info ||
|| /map/?url=...&title=... || Generate a shorted URL from a long one. || url_info ||
|| /comment/?id=xxx&comment=text-string || Add a comment to the URL with id, xxx || url_info ||
|| /comment/delete?id=xxx || Remove the comment with comment id, xxx || url_info ||

== Examples ==

http://g02.me/?callback=Test

Results:
{{{
Test({"popular": [
    {"created": new Date("10/19/2008  1: 3 GMT"),
     "url": "http://www.google.com/",
     "title": "Google",
     "comments": [
      {"comment": "Good point - I do need to add a session key, I think",
       "cid": 2429, "user": "mckoss", "created": new Date("10/20/2008  4:41 GMT")},
      ...
      ],
     "scores": {
      "week": 1.0347861977813146, "year": 0.02562912538964475,
      "day": 4.1392126989301516, "month": 0.26946271753682216},
     "shared": 12,
     "id": "G",
     "viewed": 180},
     ...
     ],
    "status": "OK"});
}}}

http://g02.me/info/G?callback=Test

Results:
{{{
Test({"status": "OK",
  "created": new Date("10/19/2008  1: 3 GMT"),
  "url": "http://www.google.com/",
  "title": "Google",
  "comments": [
    {"comment": "Good point - I do need to add a session key, I think",
     "cid": 2429, "user": "mckoss", "created": new Date("10/20/2008  4:41 GMT")},
    {"comment": "It is not a good idea to mutate state with http GET",
     "cid": 2603, "user": 176, "created": new Date("10/20/2008  2:28 GMT")},
    {"comment": "The mighty search engine...",
     "cid": 201, "user": "mckoss", "created": new Date("9/3/2008  2:45 GMT")}
    ],
  "scores": {
    "week": 1.0351657695680767, "year": 0.025629305528245251,
    "day": 4.1498525861082705, "month": 0.26948546154964254
    },
  "shared": 12,
  "id": "G",
  "viewed": 180});
}}}

http://g02.me/map/?url=http://code.google.com/p/g02me/wiki/API&title=Edit%20API-g02me&callback=Test

Results:
{{{
Test({"status": "OK",
  "created": new Date("10/18/2008 16:26 GMT"),
  "url": "http://code.google.com/p/g02me/wiki/API",
  "title": "API - g02me - Google Code",
  "comments": [
    {"comment": "First draft complete",
     "cid": 2162, "user": "mckoss", "created": new Date("10/16/2008 22:49 GMT")}
    ],
  "scores": {
    "week": 0.17224015091477538, "month": 0.045440163041166333,
    "day": 0.64928537808244025, "year": 0.0061774940162845062},
  "shared": 5,
  "id": "1g",
  "viewed": 25});
}}}

http://g02.me/comment/?id=G&comment=test:This%20is%20a%20test%20comment%20%5Bsearch%2C%20engine%5D&callback=Test

Results:
{{{
Test({"status": "OK",
  "created": new Date("10/19/2008  1: 3 GMT"),
  "url": "http://www.google.com/",
  "title": "Google",
  "comments": [
    {"comment": "This is a test comment",
     "created": new Date("10/20/2008  9:36 GMT"),
     "cid": 2433,
     "user": "test",
     "tags": "search,engine"},
    ...
    ],
  "scores": {...},
  "shared": 12,
  "id": "G",
  "viewed": 180});
}}}

http://g02.me/comment/delete?cid=2433&callback=Test

Results:
{{{
Test({"status": "OK",
  "created": new Date("10/19/2008  1: 3 GMT"),
  "url": "http://www.google.com/",
  "title": "Google",
  "comments": [...],
  "scores": {...},
  "shared": 12,
  "id": "G",
  "viewed": 182});
}}}

http://localhost:8080/comment/delete?cid=555&callback=Test

Results:
{{{
Test({"status": "Fail/NotFound",
  "message": "Comment id=555 does not exists"});
}}}